{"ast":null,"code":"import _classCallCheck from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/src/components/Graphs/BoxPlot.js\";\nimport React, { Component } from 'react';\nimport './BoxPlot.css';\nimport * as d3 from \"d3\";\n/**\n* BoxPlot is the entity we use to calculate and draw a boxplot from data given as props\n*/\n\nvar BoxPlot =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BoxPlot, _Component);\n\n  function BoxPlot() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, BoxPlot);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BoxPlot)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.returnData = function (item) {\n      var varName = _this.props.selectedVariable.name;\n      var values = item.attributes[varName];\n      var data = values[_this.props.year];\n      return {\n        value: data,\n        hospital: item\n      }; //return {v: data, g: \"box1\", t: item.name};\n    };\n\n    _this.makeDataArray = function () {\n      // sort out undefined values for given year\n      var filteredArr = _this.props.objects.filter(function (obj) {\n        return _this.returnData(obj) !== undefined && obj.name !== \"Ganze Schweiz\";\n      });\n\n      return filteredArr.map(function (item) {\n        return _this.returnData(item);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(BoxPlot, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      // draw a chart if the variable information has been loaded via api-call\n      if (this.props.hasLoaded && this.props.objects.length != 0) {\n        this.drawChart();\n      }\n    }\n    /**\n     * Returns the values stored in a this.props.objects canton/hospital\n     * @param  {Canton || Hospital Object} item The object to extract the values from\n     * @return {int || float} The selected entry in the item.values object\n     */\n\n  }, {\n    key: \"drawChart\",\n\n    /**\n     * Draws a BoxPlot\n     */\n    value: function drawChart() {\n      var _this2 = this;\n\n      var radius = 4;\n      var color = \"red\";\n      var height = 480;\n      var width = 600;\n      var boxpadding = 0.2;\n      var margin = {\n        top: 10,\n        bottom: 30,\n        left: 40,\n        right: 10\n      };\n      d3.select(\"#boxplot svg\").remove();\n      var data = this.makeDataArray(); // array only with values (selected variable)\n\n      var valueArr = data.map(function (d) {\n        return d.value;\n      }).sort(d3.ascending); // calculate the quartiles\n\n      var quartiles = [d3.quantile(valueArr, 0.25), d3.quantile(valueArr, 0.5), d3.quantile(valueArr, 0.75)];\n      var iqr = (quartiles[2] - quartiles[0]) * 1.5; // calculate min and max and mark all outliers\n\n      var max = Number.MIN_VALUE;\n      var min = Number.MAX_VALUE;\n      var box_data = d3.nest().key(function (d) {\n        var type = d.value < quartiles[0] - iqr || d.value > quartiles[2] + iqr ? \"outlier\" : \"normal\";\n\n        if (type == \"normal\" && (d.value < min || d.value > max)) {\n          max = Math.max(max, d.value);\n          min = Math.min(min, d.value);\n        }\n\n        return type;\n      }).map(data); // add empty array if no outliers\n\n      if (!box_data[\"$outlier\"]) box_data[\"$outlier\"] = [];\n      var yscale = d3.scaleLinear().domain(d3.extent(data.map(function (d) {\n        return d.value;\n      }))).nice().range([height - margin.top - margin.bottom, 0]);\n\n      var tickFormat = function tickFormat(n) {\n        return n.toLocaleString();\n      }; //default tool tip function\n\n\n      var _tipFunction = function _tipFunction(d) {\n        return ' <span>' + d.item.name + '</span>';\n      }; // generate chart\n\n\n      var svg = d3.select(\"#boxplot\").append(\"svg\").attr(\"width\", width).attr(\"height\", height);\n      svg.append(\"g\").append(\"rect\").attr(\"width\", width).attr(\"height\", height).style(\"color\", \"white\").style(\"opacity\", 0).on('dblclick', function () {\n        _this2.implode_boxplot(width, yscale, quartiles, min, max);\n      });\n      var container = svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n      var yAxis = d3.axisLeft(yscale).tickFormat(tickFormat);\n      container.append(\"g\").attr(\"class\", \"d3-exploding-boxplot y axis\").call(yAxis).append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"x\", -margin.top - d3.mean(yscale.range())).attr(\"dy\", \".71em\").attr(\"y\", -margin.left + 5).style(\"text-anchor\", \"middle\").text(\"ylab test\");\n      container = container.insert(\"g\", \".axis\");\n      var boxContent = container.append(\"g\").attr('class', 'd3-exploding-boxplot boxcontent'); //create jitter\n\n      boxContent.append(\"g\").attr(\"class\", \"d3-exploding-boxplot outliers-points\").selectAll(\".point\").data(box_data[\"$outlier\"]).enter().append(\"circle\").call(function (s) {\n        // init + draw jitter\n        s.attr(\"class\", \"d3-exploding-boxplot point\").attr(\"r\", radius).attr(\"fill\", color) //TODO Tooltip\n        .attr(\"cx\", function (d) {\n          return Math.floor(Math.random() * width);\n        }).attr(\"cy\", function (d) {\n          return yscale(d.value);\n        });\n      });\n      var box = boxContent.append(\"g\").attr(\"class\", \"d3-exploding-boxplot normal-points\").append(\"g\").attr(\"class\", \"d3-exploding-boxplot box\").on(\"click\", function (d) {\n        _this2.explode_boxplot(width, radius, color, yscale, quartiles, box_data);\n      }); //box\n\n      box.append(\"rect\").attr(\"class\", \"d3-exploding-boxplot box\"); //median line\n\n      box.append(\"line\").attr(\"class\", \"d3-exploding-boxplot median line\"); //min line\n\n      box.append(\"line\").attr(\"class\", \"d3-exploding-boxplot min line hline\"); //min vline\n\n      box.append(\"line\").attr(\"class\", \"d3-exploding-boxplot line min vline\"); //max line\n\n      box.append(\"line\").attr(\"class\", \"d3-exploding-boxplot max line hline\"); //max vline\n\n      box.append(\"line\").attr(\"class\", \"d3-exploding-boxplot line max vline\");\n      this.drawBox(width, yscale, quartiles, min, max);\n    }\n  }, {\n    key: \"explode_boxplot\",\n    value: function explode_boxplot(width, radius, color, yscale, quartiles, box_data) {\n      var trans = d3.select(\"#boxplot\").select(\"g.box\").transition().ease(d3.easeBackIn).duration(300);\n      trans.select('rect.box').attr('x', width * 0.5).attr('width', 0).attr('y', yscale(quartiles[1])).attr('height', 0); //median line\n\n      trans.selectAll('line').attr('x1', width * 0.5).attr('x2', width * 0.5).attr('y1', yscale(quartiles[1])).attr('y2', yscale(quartiles[1]));\n      d3.select(\"#boxplot\").selectAll('.normal-points').selectAll('.point').data(box_data[\"$normal\"]).enter().append('circle').attr('cx', width * 0.5).attr('cy', yscale(quartiles[1])).call(function (s) {\n        s.attr('class', 'd3-exploding-boxplot point').attr('r', radius).attr('fill', color);\n        /*.call(function(s){\n        \tif(!s.empty()) \t//TODO Tooltip\n        \t\ttip(s)\n        })\n        .on('mouseover',tip.show)\n        .on('mouseout',tip.hide) */\n      }).transition().ease(d3.easeBackOut).delay(function () {\n        return 300 + 100 * Math.random();\n      }).duration(function () {\n        return 300 + 300 * Math.random();\n      }).call(function (s) {\n        s.attr('cx', function (d) {\n          return Math.floor(Math.random() * width);\n        }).attr('cy', function (d) {\n          return yscale(d.value);\n        });\n      });\n    }\n  }, {\n    key: \"drawBox\",\n    value: function drawBox(width, yscale, quartiles, min, max) {\n      var box = d3.select(\"#boxplot\").selectAll(\"g.box\");\n      box.select('rect.box').attr('x', 0).attr('width', width).attr('y', yscale(quartiles[2])).attr('height', function (d) {\n        return yscale(quartiles[0]) - yscale(quartiles[2]);\n      }); //median line\n\n      box.select('line.median').attr('x1', 0).attr('x2', width).attr('y1', yscale(quartiles[1])).attr('y2', yscale(quartiles[1])); //min line\n\n      box.select('line.min.hline').attr('x1', width * 0.25).attr('x2', width * 0.75).attr('y1', yscale(Math.min(min, quartiles[0]))).attr('y2', yscale(Math.min(min, quartiles[0]))); //min vline\n\n      box.select('line.min.vline').attr('x1', width * 0.5).attr('x2', width * 0.5).attr('y1', yscale(Math.min(min, quartiles[0]))).attr('y2', yscale(quartiles[0])); //max line\n\n      box.select('line.max.hline').attr('x1', width * 0.25).attr('x2', width * 0.75).attr('y1', yscale(Math.max(max, quartiles[2]))).attr('y2', yscale(Math.max(max, quartiles[2]))); //max vline\n\n      box.select('line.max.vline').attr('x1', width * 0.5).attr('x2', width * 0.5).attr('y1', yscale(quartiles[2])).attr('y2', yscale(Math.max(max, quartiles[2])));\n    }\n  }, {\n    key: \"implode_boxplot\",\n    value: function implode_boxplot(width, yscale, quartiles, min, max) {\n      d3.select(\"#boxplot\").selectAll(\".normal-points\").selectAll('circle').transition().ease(d3.easeBackOut).duration(function () {\n        return 300 + 300 * Math.random();\n      }).attr(width * 0.5).attr('cy', yscale(quartiles[1])).remove();\n      var trans = d3.select(\"#boxPlot\").select('.boxcontent').transition().ease(d3.easeBackOut).duration(300).delay(200);\n      trans.select('rect.box').attr('x', 0).attr('width', width).attr('y', yscale(quartiles[2])).attr('height', function (d) {\n        return yscale(quartiles[0]) - yscale(quartiles[2]);\n      });\n      this.drawBox(width, yscale, quartiles, min, max);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        id: \"boxplot\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return BoxPlot;\n}(Component);\n\nexport default BoxPlot;","map":{"version":3,"sources":["/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/src/components/Graphs/BoxPlot.js"],"names":["React","Component","d3","BoxPlot","returnData","item","varName","props","selectedVariable","name","values","attributes","data","year","value","hospital","makeDataArray","filteredArr","objects","filter","obj","undefined","map","hasLoaded","length","drawChart","radius","color","height","width","boxpadding","margin","top","bottom","left","right","select","remove","valueArr","d","sort","ascending","quartiles","quantile","iqr","max","Number","MIN_VALUE","min","MAX_VALUE","box_data","nest","key","type","Math","yscale","scaleLinear","domain","extent","nice","range","tickFormat","n","toLocaleString","_tipFunction","svg","append","attr","style","on","implode_boxplot","container","yAxis","axisLeft","call","mean","text","insert","boxContent","selectAll","enter","s","floor","random","box","explode_boxplot","drawBox","trans","transition","ease","easeBackIn","duration","easeBackOut","delay"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './BoxPlot.css'\nimport * as d3 from \"d3\";\n\n/**\n* BoxPlot is the entity we use to calculate and draw a boxplot from data given as props\n*/\nclass BoxPlot extends Component {\n\n\tcomponentDidUpdate(){\n\t\t// draw a chart if the variable information has been loaded via api-call\n\t\tif (this.props.hasLoaded && this.props.objects.length != 0)\n\t\t\t{\n\t\t\t\tthis.drawChart();\n\t\t\t}\n\t}\n\n\t/**\n\t * Returns the values stored in a this.props.objects canton/hospital\n\t * @param  {Canton || Hospital Object} item The object to extract the values from\n\t * @return {int || float} The selected entry in the item.values object\n\t */\n\treturnData = (item) => {\n\t\tlet varName = this.props.selectedVariable.name;\n\t\tlet values = item.attributes[varName];\n\t\tlet data = (values[this.props.year]);\n\n\t\treturn {value: data, hospital: item};\n\t\t//return {v: data, g: \"box1\", t: item.name};\n\t}\n\n\t/**\n\t * Returns an Array where all defined values for given year are stored\n\t * This needed to sort the values and draw the boxplot\n\t * @return {array} dataArray\n\t */\n\tmakeDataArray = () => {\n\t\t// sort out undefined values for given year\n\t\tlet filteredArr = this.props.objects.filter((obj) => {\n\t\t\treturn (this.returnData(obj) !== undefined && obj.name !== \"Ganze Schweiz\");\n\t\t});\n\t\treturn filteredArr.map((item) => this.returnData(item));\n\t}\n\n\t/**\n\t * Draws a BoxPlot\n\t */\n\tdrawChart() {\n\t\tlet radius = 4;\n\t\tlet color = \"red\";\n\t\tlet height = 480;\n\t\tlet width = 600;\n\t\tlet boxpadding = 0.2;\n\t\tlet margin = {top:10,bottom:30,left:40,right:10};\n\t\t\n\t\td3.select(\"#boxplot svg\").remove();\n\n\t\tlet data = this.makeDataArray();\n\t\t\n\t\t// array only with values (selected variable)\n\t\tlet valueArr = data.map((d) => d.value).sort(d3.ascending);\n\n\t\t// calculate the quartiles\n\t\tlet quartiles = [\n\t\t\td3.quantile(valueArr,0.25),\n\t\t\td3.quantile(valueArr,0.5),\n\t\t\td3.quantile(valueArr,0.75)\n\t\t];\n\t\tlet iqr = (quartiles[2]-quartiles[0]) * 1.5;\n\t\n\t\t\n\t\t// calculate min and max and mark all outliers\n\t\tlet max = Number.MIN_VALUE;\n\t\tlet min = Number.MAX_VALUE;\n\t\t\n\t\tlet box_data = d3.nest()\n\t\t\t.key(function(d) {\n\t\t\t\tlet type = (d.value < quartiles[0] - iqr || d.value > quartiles[2] + iqr) ?\n\t\t\t\t\t\"outlier\" : \"normal\";\n\t\t\t\t\n\t\t\t\tif(type == \"normal\" && (d.value < min || d.value > max)){\n\t\t\t\t\tmax = Math.max(max,d.value);\n\t\t\t\t\tmin = Math.min(min,d.value);\n\t\t\t\t}\n\t\t\t\treturn type;\n             })\n\t\t\t .map(data);\n\t\t\n\t\t// add empty array if no outliers\n\t\tif(!box_data[\"$outlier\"])\n\t\t\tbox_data[\"$outlier\"] = [];\n\n\n\t\tlet yscale = d3.scaleLinear()\n\t\t\t.domain(d3.extent(data.map((d) => d.value)))\n\t\t\t.nice()\n\t\t\t.range([height-margin.top-margin.bottom,0]);\n\t\t\n\t\t\n\t\tlet tickFormat = function(n){return n.toLocaleString()};\n\t\t\n\t\t//default tool tip function\n\t\tlet _tipFunction = function(d) {\n\t\t\treturn ' <span>'+\n\t\t\t\t\td.item.name+'</span>';\n\t\t}\n\t\n\t\t// generate chart\n\t\tlet svg = d3.select(\"#boxplot\").append(\"svg\")\n\t\t\t.attr(\"width\", width)\n            .attr(\"height\", height);\n\n\t\tsvg.append(\"g\").append(\"rect\")\n\t\t\t.attr(\"width\", width)\n\t\t\t.attr(\"height\", height)\n\t\t\t.style(\"color\", \"white\")\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.on('dblclick', () => {this.implode_boxplot(width, yscale, quartiles, min, max);});\n\n\n\t\tlet container = svg.append(\"g\")\n\t\t\t.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\t\t\n\t\tlet yAxis = d3.axisLeft(yscale).tickFormat(tickFormat);\n\t\t\n\t\tcontainer.append(\"g\")\n\t\t\t.attr(\"class\", \"d3-exploding-boxplot y axis\")\n            .call(yAxis)\n          .append(\"text\")\n            .attr(\"transform\", \"rotate(-90)\")\n            .attr(\"x\", -margin.top-d3.mean(yscale.range()))\n            .attr(\"dy\", \".71em\")\n            .attr(\"y\",-margin.left+5)\n            .style(\"text-anchor\", \"middle\")\n            .text(\"ylab test\");\n\n\t\tcontainer = container.insert(\"g\",\".axis\");\n\t\t\n\t\tlet boxContent = container.append(\"g\")\n\t\t\t.attr('class','d3-exploding-boxplot boxcontent');\n\t\t\n\t\t//create jitter\n\t\tboxContent.append(\"g\")\n\t\t\t\t.attr(\"class\", \"d3-exploding-boxplot outliers-points\")\n\t\t\t\t.selectAll(\".point\")\n\t\t\t\t.data(box_data[\"$outlier\"])\n\t\t\t\t.enter()\n\t\t\t\t\t.append(\"circle\")\n\t\t\t\t\t.call(function(s) { // init + draw jitter\n\t\t\t\t\t\ts.attr(\"class\", \"d3-exploding-boxplot point\")\n\t\t\t\t\t\t\t.attr(\"r\", radius)\n\t\t\t\t\t\t\t.attr(\"fill\", color) //TODO Tooltip\n\t\t\t\t\t\t\t.attr(\"cx\", function(d){\n\t\t\t\t\t\t\t\treturn Math.floor(Math.random() * width);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.attr(\"cy\",function(d){\n\t\t\t\t\t\t\t\treturn yscale(d.value)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\tlet box = boxContent.append(\"g\")\n\t\t\t.attr(\"class\", \"d3-exploding-boxplot normal-points\")\n\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"class\", \"d3-exploding-boxplot box\")\n\t\t\t\t.on(\"click\", (d) => {\n\t\t\t\t\tthis.explode_boxplot(width, radius, color, yscale, quartiles, box_data);\n\t\t\t\t});\n\t\t\n\t\t//box\n\t\tbox.append(\"rect\").attr(\"class\", \"d3-exploding-boxplot box\");\n\t\t//median line\n\t\tbox.append(\"line\").attr(\"class\", \"d3-exploding-boxplot median line\");\n\t\t//min line\n\t\tbox.append(\"line\").attr(\"class\",\"d3-exploding-boxplot min line hline\");\n\t\t//min vline\n\t\tbox.append(\"line\").attr(\"class\",\"d3-exploding-boxplot line min vline\");\n\t\t//max line\n\t\tbox.append(\"line\").attr(\"class\",\"d3-exploding-boxplot max line hline\");\n\t\t//max vline\n\t\tbox.append(\"line\").attr(\"class\",\"d3-exploding-boxplot line max vline\");\n\n\n\t\tthis.drawBox(width, yscale, quartiles, min, max);\n\t}\n\t\n\t\n\texplode_boxplot(width, radius, color, yscale, quartiles, box_data){\n\t\tvar trans = d3.select(\"#boxplot\").select(\"g.box\").transition()\n\t\t\t\t.ease(d3.easeBackIn)\n\t\t\t\t.duration(300);\n\t\ttrans.select('rect.box')\n\t\t\t\t\t.attr('x',width*0.5)\n\t\t\t\t\t.attr('width',0)\n\t\t\t\t\t.attr('y',yscale(quartiles[1]))\n\t\t\t\t\t.attr('height',0)\n\t\t//median line\n\t\ttrans.selectAll('line')\n\t\t\t\t\t.attr('x1',width*0.5)\n\t\t\t\t\t.attr('x2',width*0.5)\n\t\t\t\t\t.attr('y1',yscale(quartiles[1]))\n\t\t\t\t\t.attr('y2',yscale(quartiles[1]))\n\t\t\t\t\n\t\td3.select(\"#boxplot\").selectAll('.normal-points')\n\t\t\t\t.selectAll('.point')\n\t\t\t\t.data(box_data[\"$normal\"])\n\t\t\t\t.enter()\n\t\t\t\t\t.append('circle')\n\t\t\t\t\t.attr('cx',width*0.5)\n\t\t\t\t\t.attr('cy',yscale(quartiles[1]))\n\t\t\t\t\t.call(function(s) {\n\t\t\t\t\t\ts.attr('class','d3-exploding-boxplot point')\n\t\t\t\t\t\t\t.attr('r',radius)\n\t\t\t\t\t\t\t.attr('fill', color)\n\t\t\t\t\t\t\t/*.call(function(s){\n\t\t\t\t\t\t\t\tif(!s.empty()) \t//TODO Tooltip\n\t\t\t\t\t\t\t\t\ttip(s)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.on('mouseover',tip.show)\n\t\t\t\t\t\t\t.on('mouseout',tip.hide) */\n\t\t\t\t\t})\n\t\t\t\t\t.transition()\n\t\t\t\t\t.ease(d3.easeBackOut)\n\t\t\t\t\t.delay(function(){\n\t\t\t\t\t\treturn 300+100*Math.random()\n\t\t\t\t\t})\n\t\t\t\t\t.duration(function(){\n\t\t\t\t\t\treturn 300+300*Math.random()\n\t\t\t\t\t})\n\t\t\t\t\t.call(function(s){\n\t\t\t\t\t\ts.attr('cx',function(d){\n\t\t\t\t\t\t\treturn Math.floor(Math.random() * width);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.attr('cy',function(d){\n\t\t\t\t\t\t\treturn yscale(d.value);\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t}\n\t\n\tdrawBox(width, yscale, quartiles, min, max) {\n\t\tlet box = d3.select(\"#boxplot\").selectAll(\"g.box\");\n\t\t\n\t\tbox.select('rect.box')\n\t\t\t.attr('x',0)\n\t\t\t.attr('width',width)\n\t\t\t.attr('y',yscale(quartiles[2]))\n\t\t\t.attr('height', function(d){\n\t\t\t\treturn yscale(quartiles[0])-yscale(quartiles[2])\n\t\t\t});\n\t\t//median line\n\t\tbox.select('line.median')\n\t\t\t.attr('x1',0).attr('x2',width)\n\t\t\t.attr('y1',yscale(quartiles[1]))\n\t\t\t.attr('y2',yscale(quartiles[1]));\n\t\t//min line\n\t\tbox.select('line.min.hline')\n\t\t\t.attr('x1',width*0.25)\n\t\t\t.attr('x2',width*0.75)\n\t\t\t.attr('y1',yscale(Math.min(min,quartiles[0])))\n\t\t\t.attr('y2',yscale(Math.min(min,quartiles[0])));\n\t\t//min vline\n\t\tbox.select('line.min.vline')\n\t\t\t.attr('x1',width*0.5)\n\t\t\t.attr('x2',width*0.5)\n\t\t\t.attr('y1',yscale(Math.min(min,quartiles[0])))\n\t\t\t.attr('y2',yscale(quartiles[0]));\n\t\t//max line\n\t\tbox.select('line.max.hline')\n\t\t\t.attr('x1',width*0.25)\n\t\t\t.attr('x2',width*0.75)\n\t\t\t.attr('y1',yscale(Math.max(max,quartiles[2])))\n\t\t\t.attr('y2',yscale(Math.max(max,quartiles[2])));\n\t\t//max vline\n\t\tbox.select('line.max.vline')\n\t\t\t.attr('x1',width*0.5)\n\t\t\t.attr('x2',width*0.5)\n\t\t\t.attr('y1',yscale(quartiles[2]))\n\t\t\t.attr('y2',yscale(Math.max(max,quartiles[2])));\n\t}\n\t\n\timplode_boxplot(width, yscale, quartiles, min, max) {\n\t\td3.select(\"#boxplot\").selectAll(\".normal-points\")\n\t\t\t.selectAll('circle')\n\t\t\t.transition()\n\t\t\t\t.ease(d3.easeBackOut)\n\t\t\t\t.duration(function(){\n\t\t\t\t\t\treturn 300+300*Math.random()\n\t\t\t\t})\n\t\t\t\t.attr(width*0.5)\n\t\t\t\t.attr('cy',yscale(quartiles[1]))\n\t\t\t\t.remove();\n\n\n\t\tlet trans = d3.select(\"#boxPlot\").select('.boxcontent')\n\t\t\t.transition()\n\t\t\t\t.ease(d3.easeBackOut)\n\t\t\t\t.duration(300)\n\t\t\t\t.delay(200);\n\t\t\n\t\ttrans.select('rect.box')\n\t\t\t.attr('x',0)\n\t\t\t.attr('width',width)\n\t\t\t.attr('y',yscale(quartiles[2]))\n\t\t\t.attr('height', function(d){\n\t\t\t\treturn yscale(quartiles[0])-yscale(quartiles[2])\n\t\t\t})\n\t\tthis.drawBox(width, yscale, quartiles, min, max);\n\t} \n\n\trender() {\n\t\treturn (\n        \t<div id=\"boxplot\"></div>\n        )\n\t}\n}\n\nexport default BoxPlot;\n"]},"metadata":{},"sourceType":"module"}