{"ast":null,"code":"import _classCallCheck from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/src/components/Maps/Maps.js\";\nimport React, { Component } from 'react';\nimport { Map, TileLayer, ZoomControl } from 'react-leaflet';\nimport './Maps.css';\nimport Control from 'react-leaflet-control';\nimport MapInfo from '../MapInfo/MapInfo.js';\nimport TestComponent from './TestComponent.js';\nimport HospitalMap from './HospitalMap.js';\nimport CantonMap from './CantonMap.js';\n\nvar Maps =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Maps, _Component);\n\n  function Maps(props) {\n    var _this;\n\n    _classCallCheck(this, Maps);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Maps).call(this, props));\n\n    _this.returnData = function (item) {\n      var varName = _this.props.variableInfo.name;\n      var values = item.attributes[varName];\n      var data = values[_this.props.year];\n      return data;\n    };\n\n    _this.setMaxAndMin = function () {\n      var min = 1000000000000,\n          max = 0,\n          sum = 0,\n          counter = 0;\n\n      _this.props.objects.map(function (obj) {\n        var val = _this.returnData(obj);\n\n        if (val === 0) {//console.log(obj.name + \" has value of 0.\");\n        }\n\n        if (obj.name !== \"Ganze Schweiz\") {\n          max = max < val ? val : max;\n          min = min > val ? val : min;\n          sum += val;\n          counter++;\n        }\n      });\n\n      var mean = sum / counter;\n      sum = 0;\n\n      _this.props.objects.map(function (obj) {\n        var val = _this.returnData(obj);\n\n        if (obj.name !== \"Ganze Schweiz\") {\n          var squareDif = Math.pow(val - mean, 2);\n          sum += squareDif;\n        }\n      });\n\n      var meanSquareDif = sum / counter;\n      var std = Math.sqrt(meanSquareDif);\n      return {\n        mean: mean,\n        std: std,\n        max: max,\n        min: min\n      };\n    };\n\n    _this.isNormable = function () {\n      var type = _this.props.variableInfo.variable_type;\n      return type === \"float\" || type === \"number\" || type === \"percentage\" || type === \"relevance\";\n    };\n\n    _this.state = {\n      lat: 46.87,\n      lng: 8.24,\n      zoom: 8\n    };\n    return _this;\n  }\n  /**\n      * Returns the values stored in a this.props.objects canton/hospital\n      * @param  {Canton || Hospital Object} item The object to extract the values from\n      * @return {int || float} The selected entry in the item.values object\n      */\n\n\n  _createClass(Maps, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var ready = this.props.hasLoaded && this.isNormable();\n      var componentToRender = null;\n      var mapInfo = null;\n\n      if (ready && this.props.view === 1) {\n        mapInfo = React.createElement(MapInfo, {\n          year: this.props.year,\n          selectedVariable: this.props.variableInfo,\n          nrOfObjects: this.props.objects.length,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        });\n        componentToRender = this.props.variableInfo.variable_model === \"Canton\" ? React.createElement(CantonMap, {\n          data: this.props.objects,\n          returnData: this.returnData,\n          maxAndMin: this.setMaxAndMin(),\n          variableInfo: this.props.variableInfo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }) : React.createElement(HospitalMap, {\n          data: this.props.objects,\n          returnData: this.returnData,\n          maxAndMin: this.setMaxAndMin(),\n          variableInfo: this.props.variableInfo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(Map // set up map\n      , {\n        className: \"map\",\n        center: [this.state.lat, this.state.lng],\n        zoom: this.state.zoom,\n        minZoom: 8 // set minimum zoom level\n        ,\n        maxZoom: 16 // set maximum zoom level\n        ,\n        zoomControl: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(ZoomControl, {\n        style: \"borderRadius=25px;\",\n        position: \"topright\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(Control, {\n        position: \"topright\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"rV\",\n        className: \"resetView\",\n        onClick: function onClick() {\n          return _this2.setState({\n            lat: 46.798473,\n            lng: 8.231726,\n            zoom: 8\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      })), React.createElement(TileLayer // add background layer\n      , {\n        attribution: \"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://api.mapbox.com/styles/v1/nathi/cjf8cggx93p3u2qrqrgwoh5nh/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibmF0aGkiLCJhIjoiY2pmOGJ4ZXJmMXMyZDJ4bzRoYWRxbzhteCJ9.x2dbGjsVZTA9HLw6VWaQow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), mapInfo, componentToRender);\n    }\n  }]);\n\n  return Maps;\n}(Component);\n\nexport default Maps;","map":{"version":3,"sources":["/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/src/components/Maps/Maps.js"],"names":["React","Component","Map","TileLayer","ZoomControl","Control","MapInfo","TestComponent","HospitalMap","CantonMap","Maps","props","returnData","item","varName","variableInfo","name","values","attributes","data","year","setMaxAndMin","min","max","sum","counter","objects","map","obj","val","mean","squareDif","Math","pow","meanSquareDif","std","sqrt","isNormable","type","variable_type","state","lat","lng","zoom","ready","hasLoaded","componentToRender","mapInfo","view","length","variable_model","setState"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Map, TileLayer, ZoomControl } from 'react-leaflet'\nimport './Maps.css';\nimport Control from 'react-leaflet-control';\nimport MapInfo from '../MapInfo/MapInfo.js';\nimport TestComponent from './TestComponent.js';\nimport HospitalMap from './HospitalMap.js';\nimport CantonMap from './CantonMap.js';\n\nclass Maps extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tlat: 46.87,\n\t\t\tlng: 8.24,\n\t\t\tzoom: 8,\n\t\t};\n\t}\n\n\t/**\n     * Returns the values stored in a this.props.objects canton/hospital\n     * @param  {Canton || Hospital Object} item The object to extract the values from\n     * @return {int || float} The selected entry in the item.values object\n     */\n\treturnData = (item) => {\n        let varName = this.props.variableInfo.name;\n\t\tlet values = item.attributes[varName];\n        let data = (values[this.props.year]);\n\t\treturn data;\n\t}\n\n\t/**\n   * Iterates through this.props.objects and finds mean, standard deviation, max and min values.\n   * @return {Object} Object.min minimum, Object.max maximum, Object.mean mean, Object.std standard deviation,\n \t*/\n\tsetMaxAndMin = () => {\n        let min = 1000000000000, max = 0, sum = 0, counter = 0;\n\n        this.props.objects.map((obj) => {\n            let val = this.returnData(obj);\n            if (val === 0) {\n                //console.log(obj.name + \" has value of 0.\");\n            }\n            if (obj.name !== \"Ganze Schweiz\") {\n                max = (max < val) ? val : max;\n                min = (min > val) ? val : min;\n                sum += val;\n                counter++;\n            }\n        })\n\n        const mean = sum/counter;\n        sum = 0;\n\n        this.props.objects.map((obj) => {\n            let val = this.returnData(obj);\n            if (obj.name !== \"Ganze Schweiz\") {\n                const squareDif = Math.pow(val - mean, 2);\n                sum += squareDif;\n            }\n        })\n\n        const meanSquareDif = sum/counter;\n        const std = Math.sqrt(meanSquareDif);\n\n        return {\n            mean: mean,\n            std: std,\n            max: max,\n            min: min\n        }\n\t}\n\n  /**\n   * Checks if the selected Variable passed through this.props.varInfo\n   * is normable (a number or similar).\n   * @return {Boolean}\n  */\n  isNormable = () => {\n    let type = this.props.variableInfo.variable_type;\n    return (type === \"float\" || type === \"number\" || type === \"percentage\" || type === \"relevance\");\n  }\n\n\trender() {\n        let ready = (this.props.hasLoaded && this.isNormable());\n        let componentToRender = null;\n        let mapInfo = null;\n\n        if (ready && this.props.view === 1) {\n            mapInfo = (\n                <MapInfo\n                    year={this.props.year}\n                    selectedVariable={this.props.variableInfo}\n                    nrOfObjects={this.props.objects.length}\n                />\n            )\n            componentToRender = (this.props.variableInfo.variable_model === \"Canton\")\n            ? (\n                <CantonMap\n                    data={this.props.objects}\n                    returnData={this.returnData}\n                    maxAndMin={this.setMaxAndMin()}\n                    variableInfo={this.props.variableInfo}\n                />\n            )\n            : (\n                <HospitalMap data={this.props.objects}\n                    returnData={this.returnData}\n                    maxAndMin={this.setMaxAndMin()}\n                    variableInfo={this.props.variableInfo}\n                />\n            );\n        }\n\n        return (\n        \t<Map // set up map\n                className=\"map\"\n        \t\tcenter={[this.state.lat, this.state.lng]}\n        \t\tzoom={this.state.zoom}\n        \t\tminZoom={8} // set minimum zoom level\n        \t\tmaxZoom={16} // set maximum zoom level\n\t\t\t\tzoomControl={false}\n        \t>\n\t\t\t\t<ZoomControl\n\t\t\t\t\tstyle=\"borderRadius=25px;\"\n\t\t\t\t\tposition=\"topright\"\n\t\t\t\t/>\n\n\t\t\t\t<Control position=\"topright\">\n\t\t\t          \t<div\n\t\t\t\t\t\t\tid=\"rV\"\n\t\t\t\t\t\t\tclassName=\"resetView\"\n\t\t\t\t\t\t\tonClick={ () => this.setState({\n\t\t\t\t\t\t\t\tlat: 46.798473,\n\t\t\t\t\t\t\t\tlng: 8.231726,\n\t\t\t\t\t\t\t\tzoom: 8,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t      \t</Control>\n        \t\t<TileLayer // add background layer\n        \t\t\tattribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        \t\t\turl=\"https://api.mapbox.com/styles/v1/nathi/cjf8cggx93p3u2qrqrgwoh5nh/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibmF0aGkiLCJhIjoiY2pmOGJ4ZXJmMXMyZDJ4bzRoYWRxbzhteCJ9.x2dbGjsVZTA9HLw6VWaQow\"\n        \t\t/>\n                {mapInfo}\n        \t\t{componentToRender}\n        \t</Map>\n        )\n\t}\n}\n\nexport default Maps;\n"]},"metadata":{},"sourceType":"module"}