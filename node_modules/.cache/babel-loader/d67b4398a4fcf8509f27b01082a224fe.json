{"ast":null,"code":"import _classCallCheck from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/src/components/ControlPanel/ControlPanel.js\";\nimport React, { Component } from 'react';\nimport DropdownMenu from '../DropdownMenu/DropdownMenu.js';\nimport FilterEditor from '../FilterEditor/FilterEditor.js';\nimport HospitalTypeFilter from '../HospitalTypeFilter/HospitalTypeFilter.js';\nimport { CSVLink } from \"react-csv\";\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport './ControlPanel.css';\n/**\n* ControlPanel-Component that contains different DropdownMenus for the selection in the\n* Map-Component, aswell as Icons to change to a different Components\n*/\n\nvar ControlPanel =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ControlPanel, _Component);\n\n  function ControlPanel() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ControlPanel);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ControlPanel)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      cantonVars: [],\n      hospitalVars: [],\n      numberVars: [],\n      enums: [],\n      selectedEnum: {},\n      csvData: []\n      /**\n       * componentDidUpdate - called after the component was updated\n       *\n       * @param  {type} prevProps previous props\n       */\n\n    };\n\n    _this.fetchData = function (variable, enumVar) {\n      var name = variable.name,\n          variable_model = variable.variable_model;\n      var key = variable_model === \"Hospital\" ? \"hospitals\" : \"cantons\";\n      var query = key + \"?variables=\";\n      query += encodeURIComponent(name);\n\n      if (key === \"hospitals\") {\n        query += encodeURIComponent(\"$\" + _this.state.enums[7].name);\n\n        if (Object.keys(enumVar).length > 0) {\n          query += encodeURIComponent(\"$\" + enumVar.name);\n        }\n      }\n\n      return _this.props.fetchData(query);\n    };\n\n    _this.setEnum = function (variable) {\n      return _this.fetchData(_this.props.selectedVariable, variable).then(function () {\n        _this.setState({\n          selectedEnum: variable\n        });\n      });\n    };\n\n    _this.resetEnum = function () {\n      _this.setState({\n        selectedEnum: {}\n      });\n    };\n\n    _this.setVariable = function (item) {\n      _this.props.setVariable(item);\n    };\n\n    _this.setTabView = function (view) {\n      var oldView = _this.props.view;\n\n      if (oldView !== view && _this.props.hasLoaded) {\n        _this.props.setView(view);\n\n        document.getElementById('t' + oldView).classList.toggle('selectedTab');\n        document.getElementById('t' + view).classList.toggle('selectedTab');\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(ControlPanel, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      // filtering the different variables after the first initialisation of variables\n      if (this.props.variables !== prevProps.variables) {\n        var cantonVars = [],\n            hospitalVars = [],\n            numberVars = [],\n            enums = [];\n        this.props.variables.forEach(function (variable) {\n          if (variable.variable_model === \"Hospital\" && variable.variable_type !== \"enum\") {\n            if (variable.name !== \"Ort\" && variable.name !== \"Adr\") {\n              // because those don't make much sense as they are attached to any hospital either way\n              hospitalVars.push(variable);\n            }\n\n            if (variable.variable_type === \"float\" || variable.variable_type === \"number\" || variable.variable_type === \"percentage\" || variable.variable_type === \"relevance\") {\n              numberVars.push(variable);\n            }\n          } else if (variable.variable_model === \"Canton\") {\n            cantonVars.push(variable);\n          } else {\n            enums.push(variable);\n          }\n        });\n        this.setState({\n          cantonVars: cantonVars,\n          hospitalVars: hospitalVars,\n          numberVars: numberVars,\n          enums: enums\n        });\n      }\n\n      if (!this.props.hasLoaded && prevProps.hasLoaded) {\n        // if a dropdown has been selected that needs to fetch data\n        if (this.props.selectedVariable !== prevProps.selectedVariable && this.props.view !== 2) {\n          // specific views in which this can happen\n          if (this.props.mapView === prevProps.mapView && this.props.view === 1 && prevProps.view === 1) {\n            this.fetchData(this.props.selectedVariable, this.state.selectedEnum);\n          } else if (this.props.graphView === prevProps.graphView && this.props.view === 3 && prevProps.view === 3 && this.props.graphView !== 2) {\n            this.fetchData(this.props.selectedVariable, {});\n          }\n        }\n      }\n    }\n    /**\n     * Called when asking for a Variable to be displayed on the map\n     * Prepares correct query to ask App.js\n     * @param  {Variable Object} variable The selected Variable to apply to Hospitals or Cantons.\n     */\n\n  }, {\n    key: \"render\",\n\n    /**\n     * render - renders the component\n     *\n     * @return {JSX}  JSX of the component\n     */\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          t = _this$props.t,\n          hasLoaded = _this$props.hasLoaded,\n          unfilteredHospitals = _this$props.unfilteredHospitals,\n          filterByEnum = _this$props.filterByEnum,\n          filterByType = _this$props.filterByType,\n          filterLinRegByType = _this$props.filterLinRegByType,\n          year = _this$props.year,\n          selectedVariable = _this$props.selectedVariable,\n          mapView = _this$props.mapView,\n          graphView = _this$props.graphView,\n          csvData = _this$props.csvData;\n      var _this$state = this.state,\n          hospitalVars = _this$state.hospitalVars,\n          cantonVars = _this$state.cantonVars,\n          numberVars = _this$state.numberVars,\n          enums = _this$state.enums,\n          selectedEnum = _this$state.selectedEnum;\n      var selectedCantonVar, selectedHospitalVar;\n      var mapViewHospitals = React.createElement(\"div\", {\n        className: \"mapViewHospitals\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(HospitalTypeFilter, {\n        id: \"mapViewHTF\",\n        hospitals: unfilteredHospitals,\n        filter: filterByType,\n        selectedYear: year,\n        hasLoaded: hasLoaded,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, t('mapView.variables')), React.createElement(DropdownMenu, {\n        id: \"hospitalVars\",\n        listItems: hospitalVars,\n        selectItem: this.setVariable,\n        selectedItem: selectedVariable,\n        defaultText: t('dropDowns.variablesFallback'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, t('mapView.filter')), React.createElement(FilterEditor, {\n        hospitals: unfilteredHospitals,\n        filter: filterByEnum,\n        hasLoaded: hasLoaded,\n        selectedYear: year,\n        selectedEnum: selectedEnum,\n        variables: enums,\n        setEnum: this.setEnum,\n        resetEnum: this.resetEnum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }));\n      var mapViewCantons = React.createElement(\"div\", {\n        className: \"mapViewCantons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, t('mapView.variables')), React.createElement(DropdownMenu, {\n        id: \"cantonVars\",\n        listItems: cantonVars,\n        selectItem: this.setVariable,\n        selectedItem: selectedVariable,\n        defaultText: t('dropDowns.variablesFallback'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }));\n      var mapViews = React.createElement(\"div\", {\n        className: \"view1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, t('mapView.title')), React.createElement(\"div\", {\n        className: \"viewSwitcher\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: mapView === 1 ? \"label selectedLabel\" : \"label\",\n        onClick: this.props.setMapView.bind(this, 1),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, t('mapView.hospitals')), React.createElement(\"p\", {\n        className: \"separator\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"|\"), React.createElement(\"p\", {\n        className: mapView === 2 ? \"label selectedLabel\" : \"label\",\n        onClick: this.props.setMapView.bind(this, 2),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, t('mapView.cantons')))), mapView === 1 ? mapViewHospitals : mapViewCantons);\n      var tableView = React.createElement(\"div\", {\n        className: \"view2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, t('tableView.title'))), React.createElement(CSVLink, {\n        data: csvData,\n        filename: \"medlandscapeCSV.csv\",\n        className: \"btnCreateCSV\",\n        ref: function ref(r) {\n          return _this2.csvLink = r;\n        },\n        target: \"_blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, t('tableView.btnCreateCSV')));\n      var boxPlotView = React.createElement(\"div\", {\n        className: \"graphView\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, t('mapView.variables')), React.createElement(DropdownMenu, {\n        id: \"hospitalVars\",\n        listItems: numberVars,\n        selectItem: this.setVariable,\n        selectedItem: selectedVariable,\n        defaultText: t('dropDowns.variablesFallback'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }));\n      var linRegView = React.createElement(\"div\", {\n        className: \"graphView\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(HospitalTypeFilter, {\n        id: \"graphViewHTF\",\n        hospitals: unfilteredHospitals,\n        filter: filterLinRegByType,\n        selectedYear: year,\n        hasLoaded: hasLoaded,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }));\n      var graphViews = React.createElement(\"div\", {\n        className: \"view3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, t('graphView.title')), React.createElement(\"div\", {\n        className: \"viewSwitcher\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: graphView === 1 ? \"label selectedLabel\" : \"label\",\n        onClick: this.props.setGraphView.bind(this, 1),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, t('graphView.boxPlot')), React.createElement(\"p\", {\n        className: \"separator\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, \"|\"), React.createElement(\"p\", {\n        className: graphView === 2 ? \"label selectedLabel\" : \"label\",\n        onClick: this.props.setGraphView.bind(this, 2),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, t('graphView.regression')))), graphView === 1 ? boxPlotView : linRegView);\n      var controlPanelView;\n\n      switch (this.props.view) {\n        case 1:\n          controlPanelView = mapViews;\n          break;\n\n        case 2:\n          controlPanelView = tableView;\n          break;\n\n        case 3:\n          controlPanelView = graphViews;\n          break;\n\n        default:\n          controlPanelView = mapViews;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"control-panel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tabs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"t1\",\n        className: \"tab selectedTab\",\n        onClick: this.setTabView.bind(this, 1),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"t2\",\n        className: \"tab\",\n        onClick: this.setTabView.bind(this, 2),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"t3\",\n        className: \"tab\",\n        onClick: this.setTabView.bind(this, 3),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"tabContent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, controlPanelView));\n    }\n  }]);\n\n  return ControlPanel;\n}(Component);\n/**\n * PropTypes:\n *\n * variables: An array of variable objects.\n * setVariable: A function that passes the newly selected Variable to the parent component.\n * selectedVariable: A variable object (or array of two objects) that represent the currently selected Variable.\n * fetchData: A function that is called when new data is needed from the API.\n * unfilteredHospitals: A complete list of all (-> \"unfiltered\") hospital objects in an array.\n * filteredByEnum: A function that passes a list of hospital objects filtered by enum to the parent component.\n * filteredByType: A function that passes a list of hospital objects filtered by Type to the parent component (when in Map view).\n * filteredLinRegByType: A function that passes a list of hospital objects filtered by Type to the parent component (when in Graph view).\n * year: The currently selected year.\n * hasLoaded: A boolean that signifies that all data has been fetched by the API and is ready to be manipulated.\n * view: A number that represents the currently selected view (Map, Table, Graph)\n * setView: A function that passes the newly selected view to the parent component.\n * mapView: A number that represents the currently selected tab on the Map view.\n * setMapView: A function that passes the newly selected Map view to the parent component\n * graphView: A number that represents the currently selected tab on the Graph view.\n * setGraphView: A function that passes the newly selected Graph view to the parent component.\n * csvData: An array that represents the data shown in the table when on Table view, to export as CSV.\n * objects: An array of hospital objects.\n */\n\n\nControlPanel.propTypes = {\n  variables: PropTypes.array.isRequired,\n  setVariable: PropTypes.func.isRequired,\n  selectedVariable: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  fetchData: PropTypes.func.isRequired,\n  unfilteredHospitals: PropTypes.array.isRequired,\n  filterByEnum: PropTypes.func.isRequired,\n  filterByType: PropTypes.func.isRequired,\n  filterLinRegByType: PropTypes.func.isRequired,\n  year: PropTypes.string.isRequired,\n  hasLoaded: PropTypes.bool.isRequired,\n  view: PropTypes.number.isRequired,\n  setView: PropTypes.func.isRequired,\n  mapView: PropTypes.number.isRequired,\n  setMapView: PropTypes.func.isRequired,\n  graphView: PropTypes.number.isRequired,\n  setGraphView: PropTypes.func.isRequired,\n  csvData: PropTypes.array.isRequired,\n  objects: PropTypes.array.isRequired,\n  setCSVData: PropTypes.func.isRequired\n  /**\n   * Convert the component using withTranslation() to have access to t() function\n   *  and other i18next props. Then export it.\n   */\n\n};\nvar LocalizedControlPanel = withTranslation()(ControlPanel);\nexport default LocalizedControlPanel;","map":{"version":3,"sources":["/Users/moriarty/Documents/UniBe/PSE/medlandscape/medlandscape-app/src/components/ControlPanel/ControlPanel.js"],"names":["React","Component","DropdownMenu","FilterEditor","HospitalTypeFilter","CSVLink","PropTypes","withTranslation","ControlPanel","state","cantonVars","hospitalVars","numberVars","enums","selectedEnum","csvData","fetchData","variable","enumVar","name","variable_model","key","query","encodeURIComponent","Object","keys","length","props","setEnum","selectedVariable","then","setState","resetEnum","setVariable","item","setTabView","view","oldView","hasLoaded","setView","document","getElementById","classList","toggle","prevProps","variables","forEach","variable_type","push","mapView","graphView","t","unfilteredHospitals","filterByEnum","filterByType","filterLinRegByType","year","selectedCantonVar","selectedHospitalVar","mapViewHospitals","mapViewCantons","mapViews","setMapView","bind","tableView","r","csvLink","boxPlotView","linRegView","graphViews","setGraphView","controlPanelView","propTypes","array","isRequired","func","oneOfType","object","string","bool","number","objects","setCSVData","LocalizedControlPanel"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport DropdownMenu from '../DropdownMenu/DropdownMenu.js';\nimport FilterEditor from '../FilterEditor/FilterEditor.js';\nimport HospitalTypeFilter from '../HospitalTypeFilter/HospitalTypeFilter.js';\nimport { CSVLink } from \"react-csv\";\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport './ControlPanel.css'\n\n/**\n* ControlPanel-Component that contains different DropdownMenus for the selection in the\n* Map-Component, aswell as Icons to change to a different Components\n*/\n\nclass ControlPanel extends Component {\n\n    state = {\n        cantonVars : [],\n        hospitalVars : [],\n        numberVars : [],\n        enums : [],\n        selectedEnum : {},\n        csvData : []\n    }\n\n    /**\n     * componentDidUpdate - called after the component was updated\n     *\n     * @param  {type} prevProps previous props\n     */\n    componentDidUpdate(prevProps) {\n        // filtering the different variables after the first initialisation of variables\n        if (this.props.variables !== prevProps.variables) {\n            let cantonVars = [], hospitalVars = [], numberVars = [], enums = [];\n\n            this.props.variables.forEach((variable) => {\n                if (variable.variable_model === \"Hospital\" && variable.variable_type !== \"enum\") {\n                    if (variable.name !== \"Ort\" && variable.name !== \"Adr\") { // because those don't make much sense as they are attached to any hospital either way\n                        hospitalVars.push(variable);\n                    }\n                    if (variable.variable_type === \"float\" || variable.variable_type === \"number\" || variable.variable_type === \"percentage\" || variable.variable_type === \"relevance\") {\n                        numberVars.push(variable);\n                    }\n                } else if (variable.variable_model === \"Canton\") {\n                    cantonVars.push(variable);\n                } else {\n                    enums.push(variable);\n                }\n            });\n\n            this.setState({\n                cantonVars : cantonVars,\n                hospitalVars : hospitalVars,\n                numberVars : numberVars,\n                enums : enums,\n            });\n        }\n\n        if (!this.props.hasLoaded && prevProps.hasLoaded) {\n            // if a dropdown has been selected that needs to fetch data\n            if (this.props.selectedVariable !== prevProps.selectedVariable && this.props.view !== 2) {\n                // specific views in which this can happen\n                if (this.props.mapView === prevProps.mapView && this.props.view === 1 && prevProps.view === 1) {\n                    this.fetchData(this.props.selectedVariable, this.state.selectedEnum);\n                } else if (this.props.graphView === prevProps.graphView && this.props.view === 3 && prevProps.view === 3 && this.props.graphView !== 2) {\n                    this.fetchData(this.props.selectedVariable, {});\n                }\n            }\n        }\n    }\n\n    /**\n     * Called when asking for a Variable to be displayed on the map\n     * Prepares correct query to ask App.js\n     * @param  {Variable Object} variable The selected Variable to apply to Hospitals or Cantons.\n     */\n    fetchData = (variable, enumVar) => {\n        const {name, variable_model} = variable;\n        let key = (variable_model === \"Hospital\") ? \"hospitals\" : \"cantons\";\n        let query = key + \"?variables=\";\n        query += encodeURIComponent(name)\n        if (key === \"hospitals\") {\n            query += encodeURIComponent(\"$\" + this.state.enums[7].name);\n            if (Object.keys(enumVar).length > 0) {\n                query += encodeURIComponent(\"$\" + enumVar.name);\n            }\n        }\n        return this.props.fetchData(query);\n    }\n\n    /**\n     * Sets the state for selected Enum variable\n     * Gets data after changing it\n     * @param {Variable Object} variable The chosen variable.\n     */\n    setEnum = (variable) => {\n        return this.fetchData(this.props.selectedVariable, variable).then(() => {\n            this.setState({\n                selectedEnum : variable\n            });\n        });\n    }\n\n    /**\n     * resetEnum - resets the enum\n     */\n    resetEnum = () => {\n        this.setState({\n            selectedEnum : {}\n        })\n    }\n\n    /**\n     * Sets the state variable selectedVariable to the selected variable from a DropdownMenu Component,\n     * then calls fetchData to fetch data from the API.\n     * @param  {Variable object} item The selected variable.\n     */\n    setVariable = (item) => {\n        this.props.setVariable(item);\n    }\n\n    /**\n     * sets the view to be displayed on the ControlPanel.\n     *\n     * @param {Integer} represents the view to change to\n     */\n    setTabView = (view) => {\n        let oldView = this.props.view;\n        if (oldView !== view && this.props.hasLoaded) {\n            this.props.setView(view);\n            document.getElementById('t' + oldView).classList.toggle('selectedTab');\n            document.getElementById('t' + view).classList.toggle('selectedTab');\n        }\n\n    }\n\n    /**\n     * render - renders the component\n     *\n     * @return {JSX}  JSX of the component\n     */\n    render() {\n\n        const {t, hasLoaded, unfilteredHospitals, filterByEnum, filterByType, filterLinRegByType, year, selectedVariable, mapView, graphView, csvData} = this.props;\n        const {hospitalVars, cantonVars, numberVars, enums, selectedEnum} = this.state;\n\n        let selectedCantonVar, selectedHospitalVar;\n\n        let mapViewHospitals = (\n            <div className=\"mapViewHospitals\">\n                <HospitalTypeFilter\n                    id=\"mapViewHTF\"\n                    hospitals={unfilteredHospitals}\n                    filter={filterByType}\n                    selectedYear={year}\n                    hasLoaded={hasLoaded}\n                />\n                <p>{t('mapView.variables')}</p>\n                <DropdownMenu id=\"hospitalVars\"\n                    listItems={hospitalVars}\n                    selectItem={this.setVariable}\n                    selectedItem={selectedVariable}\n                    defaultText={t('dropDowns.variablesFallback')}\n                />\n                <p>{t('mapView.filter')}</p>\n                <FilterEditor\n                    hospitals={unfilteredHospitals}\n                    filter={filterByEnum}\n                    hasLoaded={hasLoaded}\n                    selectedYear={year}\n                    selectedEnum={selectedEnum}\n                    variables={enums}\n                    setEnum={this.setEnum}\n                    resetEnum={this.resetEnum}\n                />\n            </div>\n        )\n\n        let mapViewCantons = (\n            <div className=\"mapViewCantons\">\n                <p>{t('mapView.variables')}</p>\n                <DropdownMenu id=\"cantonVars\" listItems={cantonVars} selectItem={this.setVariable} selectedItem={selectedVariable} defaultText={t('dropDowns.variablesFallback')}/>\n            </div>\n        )\n\n        let mapViews = (\n            <div className=\"view1\">\n                <div className=\"header\">\n                    <h1>{t('mapView.title')}</h1>\n                    <div className=\"viewSwitcher\">\n                        <p className={(mapView === 1) ? \"label selectedLabel\" : \"label\"} onClick={this.props.setMapView.bind(this, 1)}>{t('mapView.hospitals')}</p>\n                        <p className=\"separator\">|</p>\n                        <p className={(mapView === 2) ? \"label selectedLabel\" : \"label\"} onClick={this.props.setMapView.bind(this, 2)}>{t('mapView.cantons')}</p>\n                    </div>\n                </div>\n                {\n                    (mapView === 1)\n                    ? mapViewHospitals\n                    : mapViewCantons\n                }\n            </div>\n        );\n\n        let tableView = (\n            <div className=\"view2\">\n                <div className=\"header\">\n                    <h1>{t('tableView.title')}</h1>\n                </div>\n                    <CSVLink\n                        data={csvData}\n                        filename=\"medlandscapeCSV.csv\"\n                        className=\"btnCreateCSV\"\n                        ref={(r) => this.csvLink = r}\n                        target=\"_blank\"\n                    >\n                        {t('tableView.btnCreateCSV')}\n                    </CSVLink>\n            </div>\n        );\n\n        let boxPlotView = (\n            <div className=\"graphView\">\n                <p>{t('mapView.variables')}</p>\n                <DropdownMenu id=\"hospitalVars\" listItems={numberVars} selectItem={this.setVariable} selectedItem={selectedVariable}  defaultText={t('dropDowns.variablesFallback')}/>\n            </div>\n        );\n\n        let linRegView = (\n            <div className=\"graphView\">\n                <HospitalTypeFilter\n                    id=\"graphViewHTF\"\n                    hospitals={unfilteredHospitals}\n                    filter={filterLinRegByType}\n                    selectedYear={year}\n                    hasLoaded={hasLoaded}\n                />\n            </div>\n        );\n\n        let graphViews = (\n            <div className=\"view3\">\n                <div className=\"header\">\n                    <h1>{t('graphView.title')}</h1>\n                    <div className=\"viewSwitcher\">\n                        <p className={(graphView === 1) ? \"label selectedLabel\" : \"label\"} onClick={this.props.setGraphView.bind(this, 1)}>{t('graphView.boxPlot')}</p>\n                        <p className=\"separator\">|</p>\n                        <p className={(graphView === 2) ? \"label selectedLabel\" : \"label\"} onClick={this.props.setGraphView.bind(this, 2)}>{t('graphView.regression')}</p>\n                    </div>\n                </div>\n                {\n                    (graphView === 1)\n                    ? boxPlotView\n                    : linRegView\n                }\n            </div>\n        );\n\n        let controlPanelView;\n        switch(this.props.view) {\n            case 1:\n                controlPanelView = mapViews;\n                break;\n            case 2:\n                controlPanelView = tableView;\n                break;\n            case 3:\n                controlPanelView = graphViews;\n                break;\n            default:\n                controlPanelView = mapViews;\n        }\n\n        return (\n\t\t\t<div className=\"control-panel\">\n                <div className=\"tabs\">\n                    <div id=\"t1\" className=\"tab selectedTab\" onClick={this.setTabView.bind(this, 1)}></div>\n                    <div id=\"t2\" className=\"tab\" onClick={this.setTabView.bind(this, 2)}></div>\n                    <div id=\"t3\" className=\"tab\" onClick={this.setTabView.bind(this, 3)}></div>\n                </div>\n                <div className=\"tabContent\">\n                    {controlPanelView}\n                </div>\n\t\t\t</div>\n        );\n    }\n}\n\n\n/**\n * PropTypes:\n *\n * variables: An array of variable objects.\n * setVariable: A function that passes the newly selected Variable to the parent component.\n * selectedVariable: A variable object (or array of two objects) that represent the currently selected Variable.\n * fetchData: A function that is called when new data is needed from the API.\n * unfilteredHospitals: A complete list of all (-> \"unfiltered\") hospital objects in an array.\n * filteredByEnum: A function that passes a list of hospital objects filtered by enum to the parent component.\n * filteredByType: A function that passes a list of hospital objects filtered by Type to the parent component (when in Map view).\n * filteredLinRegByType: A function that passes a list of hospital objects filtered by Type to the parent component (when in Graph view).\n * year: The currently selected year.\n * hasLoaded: A boolean that signifies that all data has been fetched by the API and is ready to be manipulated.\n * view: A number that represents the currently selected view (Map, Table, Graph)\n * setView: A function that passes the newly selected view to the parent component.\n * mapView: A number that represents the currently selected tab on the Map view.\n * setMapView: A function that passes the newly selected Map view to the parent component\n * graphView: A number that represents the currently selected tab on the Graph view.\n * setGraphView: A function that passes the newly selected Graph view to the parent component.\n * csvData: An array that represents the data shown in the table when on Table view, to export as CSV.\n * objects: An array of hospital objects.\n */\n\nControlPanel.propTypes = {\n    variables: PropTypes.array.isRequired,\n    setVariable: PropTypes.func.isRequired,\n    selectedVariable: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n    fetchData: PropTypes.func.isRequired,\n    unfilteredHospitals: PropTypes.array.isRequired,\n    filterByEnum: PropTypes.func.isRequired,\n    filterByType: PropTypes.func.isRequired,\n    filterLinRegByType: PropTypes.func.isRequired,\n    year: PropTypes.string.isRequired,\n    hasLoaded: PropTypes.bool.isRequired,\n    view: PropTypes.number.isRequired,\n    setView: PropTypes.func.isRequired,\n    mapView: PropTypes.number.isRequired,\n    setMapView: PropTypes.func.isRequired,\n    graphView: PropTypes.number.isRequired,\n    setGraphView: PropTypes.func.isRequired,\n    csvData: PropTypes.array.isRequired,\n    objects: PropTypes.array.isRequired,\n    setCSVData: PropTypes.func.isRequired,\n}\n\n/**\n * Convert the component using withTranslation() to have access to t() function\n *  and other i18next props. Then export it.\n */\nconst LocalizedControlPanel = withTranslation()(ControlPanel);\nexport default LocalizedControlPanel;\n"]},"metadata":{},"sourceType":"module"}